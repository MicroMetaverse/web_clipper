# 网络OSI七层架构与TCP四层架构的应用与区别 - windpoplar - 博客园
## 1.OSI 七层网络模型介绍

　　OSI（Open System Interconnection，开放系统互连）七层网络模型称为开放式系统互联参考模型 ，是一个逻辑上的定义，一个规范，它把网络从逻辑上分为了 7 层。每一层都有相关、相对应的物理设备，比如路由器，交换机。  
　　OSI 七层模型是一种框架性的设计方法，建立七层模型的主要目的是为解决异种网络互连时所遇到的兼容性问题，其最主要的功能就是帮助不同类型的主机实现数据传输。它的最大优点是将服务、接口和协议这三个概念明确地区分开来，通过七个层次化的结构模型使不同的系统不同的网络之间实现可靠的通讯。

**OSI 七层结构图：** 

![](https://img2018.cnblogs.com/i-beta/1630503/201911/1630503-20191124101258248-774265262.png)

**各层简介：** 

**物理层（Physical Layer）**：主要定义物理设备标准，如网线的接口类型、光纤的接口类型、各种传输介质的传输速率等。它的主要作用是传输比特流（就是由 1、0 转化为电流强弱来进行传输, 到达目的地后在转化为 1、0，也就是我们常说的数模转换与模数转换），这一层的数据叫做比特，单位是 bit 比特。

**数据链路层（Datalink Layer）**：定义了如何让格式化数据以进行传输，以及如何让控制对物理介质的访问，这一层通常还提供错误检测和纠正，以确保数据的可靠传输。交换机 (二层)、网桥设备在这一层。数据链路层协议的代表包括：PPP、STP、帧中继等。

**网络层（Network Layer）**：在位于不同地理位置的网络中的两个主机系统之间提供连接和路径选择，Internet 的发展使得从世界各站点访问信息的用户数大大增加，而网络层正是管理这种连接的层。网络层负责在源机器和目标机器之间建立它们所使用的路由。路由器在该层。协议有：IP、ICMP（互联网控制报文协议）、ARP（地址转换协议）、RARP（反向地址转换协议）

**传输层（Transport Layer）**：O S I 模型中最重要的一层。定义了一些传输数据的协议和端口号（WWW 端口 80 等），如：TCP（传输控制协议，传输效率低，可靠性强，用于传输可靠性要求高，数据量大的数据），UDP（用户数据报协议，与 TCP 特性恰恰相反，用于传输可靠性要求不高，数据量小的数据，如 QQ 聊天数据就是通过这种方式传输的）， 主要是将从下层接收的数据进行分段和传输，到达目的地址后再进行重组，常常把这一层数据叫做段。

传输协议同时进行流量控制或是基于接收方可接收数据的快慢程度规定适当的发送速率。除此之外，传输层按照网络能处理的最大尺寸将较长的数据包进行强制分割。例如，以太网无法接收大于 1 5 0 0 字节的数据包。发送方节点的传输层将数据分割成较小的数据片，同时对每一数据片安排一序列号，以便数据到达接收方节点的传输层时，能以正确的顺序重组。该过程即被称为排序。

**会话层（Session Layer）**：负责在网络中的两节点之间建立、维持和终止通信。 会话层的功能包括：建立通信链接，保持会话过程通信链接的畅通，同步两个节点之间的对话，决定通信是否被中断以及通信中断时决定从何处重新发送。

通过传输层（端口号：传输端口与接收端口）建立数据传输的通路，主要在你的系统之间发起会话或者接受会话请求（设备之间需要互相认识可以是 IP 也可以是 MAC 或者是主机名）。

**表示层（Presentation Layer）**：应用程序和网络之间的翻译官，在表示层，数据将按照网络能理解的方案进行格式化；这种格式化也因所使用网络的类型不同而不同。 　　表示层管理数据的解密与加密，如系统口令的处理。可确保一个系统的应用层所发送的信息可以被另一个系统的应用层读取。例如，PC 程序与另一台计算机进行通信，其中一台计算机使用扩展二一十进制交换码（EBCDIC），而另一台则使用美国信息交换标准码（ASCII）来表示相同的字符。如有必要，表示层会通过使用一种通格式来实现多种数据格式之间的转换。

**应用层（Application Layer）**： 是最靠近用户的 OSI 层，这一层为用户的应用程序（例如电子邮件、文件传输和终端仿真）提供网络服务。

## 2.TCP/IP 四层网络模型介绍

TCP/IP 协议栈是美国国防部高级研究计划局计算机网（Advanced Research Projects Agency Network，ARPANET）和其后继因特网使用的参考模型。ARPANET 是由美国国防部（U.S．Department of Defense，DoD）赞助的研究网络。最初，它只连接了美国境内的四所大学。随后的几年中，它通过租用的电话线连接了数百所大学和政府部门。最终 ARPANET 发展成为全球规模最大的互连网络 - 因特网。最初的 ARPANET 于 1990 年永久性地关闭。

TCP/IP 是一组协议的代名词，它还包括许多协议，组成了 TCP/IP 协议簇。TCP/IP 协议簇分为四层，IP 位于协议簇的第二层 (对应 OSI 的第三层)，TCP 位于协议簇的第三层 (对应 OSI 的第四层)。  
TCP/IP 通讯协议采用了 4 层的层级结构，每一层都呼叫它的下一层所提供的网络来完成自己的需求。这 4 层分别为：

**应用层**：应用程序间沟通的层，如简单电子邮件传输（SMTP）、文件传输协议（FTP）、网络远程访问协议（Telnet）等。

**传输层**：在此层中，它提供了节点间的数据传送服务，如传输控制协议（TCP）、用户数据报协议（UDP）等，TCP 和 UDP 给数据包加入传输数据并把它传输到下一层中，这一层负责传送数据，并且确定数据已被送达并接收。

**网络层**：负责提供基本的数据封包传送功能，让每一块数据包都能够到达目的主机（但不检查是否被正确接收），如网际协议（IP）。

**网络接口层**：对实际的网络媒体的管理，定义如何使用实际网络（如 Ethernet、Serial Line 等）来传送数据。

**TCP/IP 四层结构图**：

![](https://img2018.cnblogs.com/i-beta/1630503/201911/1630503-20191124101534527-776654994.png)

## 3. 各层对应的协议

 ![](https://img2018.cnblogs.com/i-beta/1630503/201911/1630503-20191124101605660-1379925629.png)

其实在应用、表示和会话这三层之间的协议可共用（由于实际的网络协议将它们归了一类所致）

## 4.OSI 七层和 TCP/IP 四层的区别

OSI 引入了服务、接口、协议、分层的概念，TCP/IP 借鉴了 OSI 的这些概念建立 TCP/IP 模型。

OSI 先有模型，后有协议，先有标准，后进行实践；而 TCP/IP 则相反，先有协议和应用再提出了模型，且是参照的 OSI 模型。

OSI 是一种理论下的模型，而 TCP/IP 已被广泛使用，成为网络互联事实上的标准。

除了层的数量之外，开放式系统互联（OSI）模型与 TCP/IP 协议有什么区别？

开放式系统互联模型是一个参考标准，解释协议相互之间应该如何相互作用。TCP/IP 协议是美国国防部发明的，是让互联网成为了目前这个样子的标准之一。开放式系统互联模型中没有清楚地描绘 TCP/IP 协议，但是在解释 TCP/IP 协议时很容易想到开放式系统互联模型。两者的主要区别如下：

TCP/IP 协议中的应用层处理开放式系统互联模型中的第五层、第六层和第七层的功能。

TCP/IP 协议中的传输层并不能总是保证在传输层可靠地传输数据包，而开放式系统互联模型可以做到。这是因为 TCP/IP 协议还提供一项名为 UDP（用户数据报协议）的选择。UDP 不能保证可靠的数据包传输。

**OSI 网络模型和 TCP/IP 网络模型对应关系**：

![](https://img2018.cnblogs.com/i-beta/1630503/201911/1630503-20191124101716171-2042619948.png)

 ![](https://img2018.cnblogs.com/i-beta/1630503/201911/1630503-20191124101748963-418281539.png)

## 5. 交换机工作在 OSI 的哪一层

如果有人问这个问题，我的回答是 ：  
二层交换机工作在 OSI 的第二层数据链路层，，由于它们要对帧解码并使用帧信息将数据发送到正确的接收方，所以它们是工作在数据链路层的。  
三层交换机是工作在 OSI 的网络层，因为三层交换机有路由功能。

## 6. 路由器工作在 OSI 的哪一层

路由器工作在 OSI 七层模型的第 3 层，网络层。由于网络层处理，并智能指导数据传送，路由器连接网络各段，所以路由器属于网络层。在网络中，“路由” 是基于编址方案、使用模式以及可达性来指引数据的发送。 网络层负责在源机器和目标机器之间建立它们所使用的路由。

## 7.PING 命令使用 OSI 哪一层协议

ping 命令使用的是 ICMP 协议，位于 OSI 七层网络模型中的第三层，网络层； 
 [https://www.cnblogs.com/windpoplar/p/11921472.html](https://www.cnblogs.com/windpoplar/p/11921472.html)
